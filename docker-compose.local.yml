---
# Use this file to build locally instead of pulling from GHCR
# Usage: docker compose -f docker-compose.local.yml up -d --build
services:
  render-linear-sync:
    build:
      context: .
      dockerfile: Dockerfile
    image: render-linear-sync:latest
    container_name: render-linear-sync
    restart: unless-stopped
    environment:
      LINEAR_API_KEY: ${LINEAR_API_KEY}
      RENDER_API_KEY: ${RENDER_API_KEY}
      RENDER_WORKSPACE_ID: ${RENDER_WORKSPACE_ID:-}
      RENDER_BRANCH: ${RENDER_BRANCH:-main}

      # Application Configuration
      DRY_RUN: ${DRY_RUN:-false}
      DB_PATH: /app/data/render-linear-sync.db
      PORT: ${PORT:-3000}

    volumes:
      - ./data:/app/data
